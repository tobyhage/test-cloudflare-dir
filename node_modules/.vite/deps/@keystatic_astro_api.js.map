{
  "version": 3,
  "sources": ["../../.pnpm/set-cookie-parser@2.6.0/node_modules/set-cookie-parser/lib/set-cookie.js", "../../.pnpm/@keystatic+core@0.2.4_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/api/generic/dist/keystatic-core-api-generic.esm.js", "../../.pnpm/iron-webcrypto@0.10.1/node_modules/iron-webcrypto/dist/index.js", "../../.pnpm/@keystatic+astro@2.0.0_@keystatic+core@0.2.4_astro@3.6.4_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/astro/api/dist/keystatic-astro-api.esm.js"],
  "sourcesContent": ["\"use strict\";\n\nvar defaultParseOptions = {\n  decodeValues: true,\n  map: false,\n  silent: false,\n};\n\nfunction isNonEmptyString(str) {\n  return typeof str === \"string\" && !!str.trim();\n}\n\nfunction parseString(setCookieValue, options) {\n  var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n\n  var nameValuePairStr = parts.shift();\n  var parsed = parseNameValuePair(nameValuePairStr);\n  var name = parsed.name;\n  var value = parsed.value;\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  try {\n    value = options.decodeValues ? decodeURIComponent(value) : value; // decode cookie value\n  } catch (e) {\n    console.error(\n      \"set-cookie-parser encountered an error while decoding a cookie with value '\" +\n        value +\n        \"'. Set options.decodeValues to false to disable this feature.\",\n      e\n    );\n  }\n\n  var cookie = {\n    name: name,\n    value: value,\n  };\n\n  parts.forEach(function (part) {\n    var sides = part.split(\"=\");\n    var key = sides.shift().trimLeft().toLowerCase();\n    var value = sides.join(\"=\");\n    if (key === \"expires\") {\n      cookie.expires = new Date(value);\n    } else if (key === \"max-age\") {\n      cookie.maxAge = parseInt(value, 10);\n    } else if (key === \"secure\") {\n      cookie.secure = true;\n    } else if (key === \"httponly\") {\n      cookie.httpOnly = true;\n    } else if (key === \"samesite\") {\n      cookie.sameSite = value;\n    } else {\n      cookie[key] = value;\n    }\n  });\n\n  return cookie;\n}\n\nfunction parseNameValuePair(nameValuePairStr) {\n  // Parses name-value-pair according to rfc6265bis draft\n\n  var name = \"\";\n  var value = \"\";\n  var nameValueArr = nameValuePairStr.split(\"=\");\n  if (nameValueArr.length > 1) {\n    name = nameValueArr.shift();\n    value = nameValueArr.join(\"=\"); // everything after the first =, joined by a \"=\" if there was more than one part\n  } else {\n    value = nameValuePairStr;\n  }\n\n  return { name: name, value: value };\n}\n\nfunction parse(input, options) {\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!input) {\n    if (!options.map) {\n      return [];\n    } else {\n      return {};\n    }\n  }\n\n  if (input.headers) {\n    if (typeof input.headers.getSetCookie === \"function\") {\n      // for fetch responses - they combine headers of the same type in the headers array,\n      // but getSetCookie returns an uncombined array\n      input = input.headers.getSetCookie();\n    } else if (input.headers[\"set-cookie\"]) {\n      // fast-path for node.js (which automatically normalizes header names to lower-case\n      input = input.headers[\"set-cookie\"];\n    } else {\n      // slow-path for other environments - see #25\n      var sch =\n        input.headers[\n          Object.keys(input.headers).find(function (key) {\n            return key.toLowerCase() === \"set-cookie\";\n          })\n        ];\n      // warn if called on a request-like object with a cookie header rather than a set-cookie header - see #34, 36\n      if (!sch && input.headers.cookie && !options.silent) {\n        console.warn(\n          \"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\"\n        );\n      }\n      input = sch;\n    }\n  }\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!options.map) {\n    return input.filter(isNonEmptyString).map(function (str) {\n      return parseString(str, options);\n    });\n  } else {\n    var cookies = {};\n    return input.filter(isNonEmptyString).reduce(function (cookies, str) {\n      var cookie = parseString(str, options);\n      cookies[cookie.name] = cookie;\n      return cookies;\n    }, cookies);\n  }\n}\n\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n\n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\nfunction splitCookiesString(cookiesString) {\n  if (Array.isArray(cookiesString)) {\n    return cookiesString;\n  }\n  if (typeof cookiesString !== \"string\") {\n    return [];\n  }\n\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos;\n        pos += 1;\n\n        skipWhitespace();\n        nextStart = pos;\n\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n\n        // currently special character\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          // we found cookies separator\n          cookiesSeparatorFound = true;\n          // pos is inside the next cookie, so back up and return it.\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n\n  return cookiesStrings;\n}\n\nmodule.exports = parse;\nmodule.exports.parse = parse;\nmodule.exports.parseString = parseString;\nmodule.exports.splitCookiesString = splitCookiesString;\n", "import cookie from 'cookie';\nimport * as Iron from 'iron-webcrypto';\nimport z from 'zod';\nimport { b as bytesToHex } from '../../../dist/hex-35fa8573.esm.js';\n\nfunction redirect(to, initialHeaders) {\n  return {\n    body: null,\n    status: 307,\n    headers: [...(initialHeaders !== null && initialHeaders !== void 0 ? initialHeaders : []), ['Location', to]]\n  };\n}\n\nconst localModeApiHandler = () => async () => ({\n  status: 500,\n  body: \"The Keystatic API route is running in a non-Node.js environment which is not supported with `storage: { kind: 'local' }`\"\n});\nconst handleGitHubAppCreation = async () => ({\n  status: 500,\n  body: 'The Keystatic API route is running in a non-Node.js environment which does not support GitHub App creation'\n});\n\nconst webcrypto = crypto;\n\nconst keystaticRouteRegex = /^branch\\/[^]+(\\/collection\\/[^/]+(|\\/(create|item\\/[^/]+))|\\/singleton\\/[^/]+)?$/;\nconst keyToEnvVar = {\n  clientId: 'KEYSTATIC_GITHUB_CLIENT_ID',\n  clientSecret: 'KEYSTATIC_GITHUB_CLIENT_SECRET',\n  secret: 'KEYSTATIC_SECRET'\n};\nfunction tryOrUndefined(fn) {\n  try {\n    return fn();\n  } catch {\n    return undefined;\n  }\n}\nfunction makeGenericAPIRouteHandler(_config, options) {\n  var _config$clientId, _config$clientSecret, _config$secret;\n  const _config2 = {\n    clientId: (_config$clientId = _config.clientId) !== null && _config$clientId !== void 0 ? _config$clientId : tryOrUndefined(() => process.env.KEYSTATIC_GITHUB_CLIENT_ID),\n    clientSecret: (_config$clientSecret = _config.clientSecret) !== null && _config$clientSecret !== void 0 ? _config$clientSecret : tryOrUndefined(() => process.env.KEYSTATIC_GITHUB_CLIENT_SECRET),\n    secret: (_config$secret = _config.secret) !== null && _config$secret !== void 0 ? _config$secret : tryOrUndefined(() => process.env.KEYSTATIC_SECRET),\n    config: _config.config\n  };\n  const getParams = req => {\n    let url;\n    try {\n      url = new URL(req.url);\n    } catch (err) {\n      throw new Error(`Found incomplete URL in Keystatic API route URL handler${(options === null || options === void 0 ? void 0 : options.slugEnvName) === 'NEXT_PUBLIC_KEYSTATIC_GITHUB_APP_SLUG' ? \". Make sure you're using the latest version of @keystatic/next\" : ''}`);\n    }\n    return url.pathname.replace(/^\\/api\\/keystatic\\/?/, '').split('/').map(x => decodeURIComponent(x)).filter(Boolean);\n  };\n  if (_config2.config.storage.kind === 'local') {\n    const handler = localModeApiHandler(_config2.config, _config.localBaseDirectory);\n    return req => {\n      const params = getParams(req);\n      return handler(req, params);\n    };\n  }\n  if (_config2.config.storage.kind === 'cloud') {\n    return async function keystaticAPIRoute() {\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    };\n  }\n  if (!_config2.clientId || !_config2.clientSecret || !_config2.secret) {\n    if (process.env.NODE_ENV !== 'development') {\n      const missingKeys = ['clientId', 'clientSecret', 'secret'].filter(x => !_config2[x]);\n      throw new Error(`Missing required config in Keystatic API setup when using the 'github' storage mode:\\n${missingKeys.map(key => `- ${key} (can be provided via ${keyToEnvVar[key]} env var)`).join('\\n')}\\n\\nIf you've created your GitHub app locally, make sure to copy the environment variables from your local env file to your deployed environment`);\n    }\n    return async function keystaticAPIRoute(req) {\n      const params = getParams(req);\n      const joined = params.join('/');\n      if (joined === 'github/created-app') {\n        return createdGithubApp(req, options === null || options === void 0 ? void 0 : options.slugEnvName);\n      }\n      if (joined === 'github/login' || joined === 'github/repo-not-found' || joined === 'github/logout') {\n        return redirect('/keystatic/setup');\n      }\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    };\n  }\n  const config = {\n    clientId: _config2.clientId,\n    clientSecret: _config2.clientSecret,\n    secret: _config2.secret,\n    config: _config2.config\n  };\n  return async function keystaticAPIRoute(req) {\n    const params = getParams(req);\n    const joined = params.join('/');\n    if (joined === 'github/oauth/callback') {\n      return githubOauthCallback(req, config);\n    }\n    if (joined === 'github/login') {\n      return githubLogin(req, config);\n    }\n    if (joined === 'github/refresh-token') {\n      return githubRefreshToken(req, config);\n    }\n    if (joined === 'github/repo-not-found') {\n      return githubRepoNotFound(req, config);\n    }\n    if (joined === 'github/logout') {\n      return redirect('/keystatic', [['Set-Cookie', immediatelyExpiringCookie('keystatic-gh-access-token')], ['Set-Cookie', immediatelyExpiringCookie('keystatic-gh-refresh-token')]]);\n    }\n    return {\n      status: 404,\n      body: 'Not Found'\n    };\n  };\n}\nconst tokenDataResultType = z.object({\n  access_token: z.string(),\n  expires_in: z.number(),\n  refresh_token: z.string(),\n  refresh_token_expires_in: z.number(),\n  scope: z.string(),\n  token_type: z.literal('bearer')\n});\nasync function githubOauthCallback(req, config) {\n  var _req$headers$get;\n  const searchParams = new URL(req.url, 'http://localhost').searchParams;\n  const error = searchParams.get('error');\n  const errorDescription = searchParams.get('error_description');\n  if (typeof errorDescription === 'string') {\n    return {\n      status: 400,\n      body: `An error occurred when trying to authenticate with GitHub:\\n${errorDescription}${error === 'redirect_uri_mismatch' ? `\\n\\nIf you were trying to sign in locally and recently upgraded Keystatic from @keystatic/core@0.0.69 or below, you need to add \\`http://127.0.0.1/api/keystatic/github/oauth/callback\\` as a callback URL in your GitHub app.` : ''}`\n    };\n  }\n  const code = searchParams.get('code');\n  const state = searchParams.get('state');\n  if (typeof code !== 'string') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const cookies = cookie.parse((_req$headers$get = req.headers.get('cookie')) !== null && _req$headers$get !== void 0 ? _req$headers$get : '');\n  const fromCookie = state ? cookies['ks-' + state] : undefined;\n  const from = typeof fromCookie === 'string' && keystaticRouteRegex.test(fromCookie) ? fromCookie : undefined;\n  const url = new URL('https://github.com/login/oauth/access_token');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('client_secret', config.clientSecret);\n  url.searchParams.set('code', code);\n  const tokenRes = await fetch(url, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!tokenRes.ok) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  const _tokenData = await tokenRes.json();\n  const tokenDataParseResult = tokenDataResultType.safeParse(_tokenData);\n  if (!tokenDataParseResult.success) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  const headers = await getTokenCookies(tokenDataParseResult.data, config);\n  if (state === 'close') {\n    return {\n      headers: [...headers, ['Content-Type', 'text/html']],\n      body: \"<script>localStorage.setItem('ks-refetch-installations', 'true');window.close();</script>\",\n      status: 200\n    };\n  }\n  return redirect(`/keystatic${from ? `/${from}` : ''}`, headers);\n}\nasync function getTokenCookies(tokenData, config) {\n  const headers = [['Set-Cookie', cookie.serialize('keystatic-gh-access-token', tokenData.access_token, {\n    sameSite: 'lax',\n    secure: process.env.NODE_ENV === 'production',\n    maxAge: tokenData.expires_in,\n    expires: new Date(Date.now() + tokenData.expires_in * 1000),\n    path: '/'\n  })], ['Set-Cookie', cookie.serialize('keystatic-gh-refresh-token', await Iron.seal(webcrypto, tokenData.refresh_token, config.secret, {\n    ...Iron.defaults,\n    ttl: tokenData.refresh_token_expires_in * 1000\n  }), {\n    sameSite: 'lax',\n    secure: process.env.NODE_ENV === 'production',\n    httpOnly: true,\n    maxAge: tokenData.refresh_token_expires_in,\n    expires: new Date(Date.now() + tokenData.refresh_token_expires_in * 100),\n    path: '/'\n  })]];\n  return headers;\n}\nasync function getRefreshToken(req, config) {\n  const cookies = cookie.parse(req.headers.get('cookie') || '');\n  const refreshTokenCookie = cookies['keystatic-gh-refresh-token'];\n  if (!refreshTokenCookie) return;\n  let refreshToken;\n  try {\n    refreshToken = await Iron.unseal(webcrypto, refreshTokenCookie, config.secret, Iron.defaults);\n  } catch {\n    return;\n  }\n  if (typeof refreshToken !== 'string') return;\n  return refreshToken;\n}\nasync function githubRefreshToken(req, config) {\n  const headers = await refreshGitHubAuth(req, config);\n  if (!headers) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  return {\n    status: 200,\n    headers,\n    body: ''\n  };\n}\nasync function refreshGitHubAuth(req, config) {\n  const refreshToken = await getRefreshToken(req, config);\n  if (!refreshToken) {\n    return;\n  }\n  const url = new URL('https://github.com/login/oauth/access_token');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('client_secret', config.clientSecret);\n  url.searchParams.set('grant_type', 'refresh_token');\n  url.searchParams.set('refresh_token', refreshToken);\n  const tokenRes = await fetch(url, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!tokenRes.ok) {\n    return;\n  }\n  const _tokenData = await tokenRes.json();\n  const tokenDataParseResult = tokenDataResultType.safeParse(_tokenData);\n  if (!tokenDataParseResult.success) {\n    return;\n  }\n  return getTokenCookies(tokenDataParseResult.data, config);\n}\nasync function githubRepoNotFound(req, config) {\n  const headers = await refreshGitHubAuth(req, config);\n  if (headers) {\n    return redirect('/keystatic/repo-not-found', headers);\n  }\n  return githubLogin(req, config);\n}\nasync function githubLogin(req, config) {\n  const reqUrl = new URL(req.url);\n  const rawFrom = reqUrl.searchParams.get('from');\n  const from = typeof rawFrom === 'string' && keystaticRouteRegex.test(rawFrom) ? rawFrom : '/';\n  const state = bytesToHex(webcrypto.getRandomValues(new Uint8Array(10)));\n  const url = new URL('https://github.com/login/oauth/authorize');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('redirect_uri', `${reqUrl.origin}/api/keystatic/github/oauth/callback`);\n  if (from === '/') {\n    return redirect(url.toString());\n  }\n  url.searchParams.set('state', state);\n  return redirect(url.toString(), [['Set-Cookie', cookie.serialize('ks-' + state, from, {\n    sameSite: 'lax',\n    secure: process.env.NODE_ENV === 'production',\n    // 1 day\n    maxAge: 60 * 60 * 24,\n    expires: new Date(Date.now() + 60 * 60 * 24 * 1000),\n    path: '/',\n    httpOnly: true\n  })]]);\n}\nasync function createdGithubApp(req, slugEnvVarName) {\n  if (process.env.NODE_ENV !== 'development') {\n    return {\n      status: 400,\n      body: 'App setup only allowed in development'\n    };\n  }\n  return handleGitHubAppCreation();\n}\nfunction immediatelyExpiringCookie(name) {\n  return cookie.serialize(name, '', {\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    path: '/',\n    maxAge: 0,\n    expires: new Date()\n  });\n}\n\nexport { makeGenericAPIRouteHandler };\n", "// node_modules/.pnpm/@smithy+util-base64@2.0.0/node_modules/@smithy/util-base64/dist-es/constants.browser.js\nvar alphabetByEncoding = {};\nvar alphabetByValue = new Array(64);\nfor (let i = 0, start = \"A\".charCodeAt(0), limit = \"Z\".charCodeAt(0); i + start <= limit; i++) {\n  const char = String.fromCharCode(i + start);\n  alphabetByEncoding[char] = i;\n  alphabetByValue[i] = char;\n}\nfor (let i = 0, start = \"a\".charCodeAt(0), limit = \"z\".charCodeAt(0); i + start <= limit; i++) {\n  const char = String.fromCharCode(i + start);\n  const index = i + 26;\n  alphabetByEncoding[char] = index;\n  alphabetByValue[index] = char;\n}\nfor (let i = 0; i < 10; i++) {\n  alphabetByEncoding[i.toString(10)] = i + 52;\n  const char = i.toString(10);\n  const index = i + 52;\n  alphabetByEncoding[char] = index;\n  alphabetByValue[index] = char;\n}\nalphabetByEncoding[\"+\"] = 62;\nalphabetByValue[62] = \"+\";\nalphabetByEncoding[\"/\"] = 63;\nalphabetByValue[63] = \"/\";\nvar bitsPerLetter = 6;\nvar bitsPerByte = 8;\nvar maxLetterValue = 63;\n\n// node_modules/.pnpm/@smithy+util-base64@2.0.0/node_modules/@smithy/util-base64/dist-es/fromBase64.browser.js\nvar fromBase64 = (input) => {\n  let totalByteLength = input.length / 4 * 3;\n  if (input.slice(-2) === \"==\") {\n    totalByteLength -= 2;\n  } else if (input.slice(-1) === \"=\") {\n    totalByteLength--;\n  }\n  const out = new ArrayBuffer(totalByteLength);\n  const dataView = new DataView(out);\n  for (let i = 0; i < input.length; i += 4) {\n    let bits = 0;\n    let bitLength = 0;\n    for (let j = i, limit = i + 3; j <= limit; j++) {\n      if (input[j] !== \"=\") {\n        if (!(input[j] in alphabetByEncoding)) {\n          throw new TypeError(`Invalid character ${input[j]} in base64 string.`);\n        }\n        bits |= alphabetByEncoding[input[j]] << (limit - j) * bitsPerLetter;\n        bitLength += bitsPerLetter;\n      } else {\n        bits >>= bitsPerLetter;\n      }\n    }\n    const chunkOffset = i / 4 * 3;\n    bits >>= bitLength % bitsPerByte;\n    const byteLength = Math.floor(bitLength / bitsPerByte);\n    for (let k = 0; k < byteLength; k++) {\n      const offset = (byteLength - k - 1) * bitsPerByte;\n      dataView.setUint8(chunkOffset + k, (bits & 255 << offset) >> offset);\n    }\n  }\n  return new Uint8Array(out);\n};\n\n// node_modules/.pnpm/@smithy+util-base64@2.0.0/node_modules/@smithy/util-base64/dist-es/toBase64.browser.js\nfunction toBase64(input) {\n  let str = \"\";\n  for (let i = 0; i < input.length; i += 3) {\n    let bits = 0;\n    let bitLength = 0;\n    for (let j = i, limit = Math.min(i + 3, input.length); j < limit; j++) {\n      bits |= input[j] << (limit - j - 1) * bitsPerByte;\n      bitLength += bitsPerByte;\n    }\n    const bitClusterCount = Math.ceil(bitLength / bitsPerLetter);\n    bits <<= bitClusterCount * bitsPerLetter - bitLength;\n    for (let k = 1; k <= bitClusterCount; k++) {\n      const offset = (bitClusterCount - k) * bitsPerLetter;\n      str += alphabetByValue[(bits & maxLetterValue << offset) >> offset];\n    }\n    str += \"==\".slice(0, 4 - bitClusterCount);\n  }\n  return str;\n}\n\n// src/index.ts\nvar stringToBuffer = (value) => {\n  return new TextEncoder().encode(value);\n};\nvar bufferToString = (value) => {\n  return new TextDecoder().decode(value);\n};\nvar base64urlEncode = (value) => toBase64(typeof value === \"string\" ? stringToBuffer(value) : value).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\nvar base64urlDecode = (value) => fromBase64(\n  value.replace(/-/g, \"+\").replace(/_/g, \"/\") + Array((4 - value.length % 4) % 4 + 1).join(\"=\")\n);\nvar defaults = {\n  encryption: { saltBits: 256, algorithm: \"aes-256-cbc\", iterations: 1, minPasswordlength: 32 },\n  integrity: { saltBits: 256, algorithm: \"sha256\", iterations: 1, minPasswordlength: 32 },\n  ttl: 0,\n  timestampSkewSec: 60,\n  localtimeOffsetMsec: 0\n};\nvar clone = (options) => ({\n  ...options,\n  encryption: { ...options.encryption },\n  integrity: { ...options.integrity }\n});\nvar algorithms = {\n  \"aes-128-ctr\": { keyBits: 128, ivBits: 128, name: \"AES-CTR\" },\n  \"aes-256-cbc\": { keyBits: 256, ivBits: 128, name: \"AES-CBC\" },\n  sha256: { keyBits: 256, name: \"SHA-256\" }\n};\nvar macFormatVersion = \"2\";\nvar macPrefix = `Fe26.${macFormatVersion}`;\nvar randomBytes = (_crypto, size) => {\n  const bytes = new Uint8Array(size);\n  _crypto.getRandomValues(bytes);\n  return bytes;\n};\nvar randomBits = (_crypto, bits) => {\n  if (bits < 1)\n    throw Error(\"Invalid random bits count\");\n  const bytes = Math.ceil(bits / 8);\n  return randomBytes(_crypto, bytes);\n};\nvar pbkdf2 = async (_crypto, password, salt, iterations, keyLength, hash) => {\n  const passwordBuffer = stringToBuffer(password);\n  const importedKey = await _crypto.subtle.importKey(\"raw\", passwordBuffer, \"PBKDF2\", false, [\n    \"deriveBits\"\n  ]);\n  const saltBuffer = stringToBuffer(salt);\n  const params = { name: \"PBKDF2\", hash, salt: saltBuffer, iterations };\n  const derivation = await _crypto.subtle.deriveBits(params, importedKey, keyLength * 8);\n  return derivation;\n};\nvar generateKey = async (_crypto, password, options) => {\n  if (!password?.length)\n    throw new Error(\"Empty password\");\n  if (options == null || typeof options !== \"object\")\n    throw new Error(\"Bad options\");\n  if (!(options.algorithm in algorithms))\n    throw new Error(`Unknown algorithm: ${options.algorithm}`);\n  const algorithm = algorithms[options.algorithm];\n  const result = {};\n  const hmac = options.hmac ?? false;\n  const id = hmac ? { name: \"HMAC\", hash: algorithm.name } : { name: algorithm.name };\n  const usage = hmac ? [\"sign\", \"verify\"] : [\"encrypt\", \"decrypt\"];\n  if (typeof password === \"string\") {\n    if (password.length < options.minPasswordlength)\n      throw new Error(\n        `Password string too short (min ${options.minPasswordlength} characters required)`\n      );\n    let { salt = \"\" } = options;\n    if (!salt) {\n      const { saltBits = 0 } = options;\n      if (!saltBits)\n        throw new Error(\"Missing salt and saltBits options\");\n      const randomSalt = randomBits(_crypto, saltBits);\n      salt = [...new Uint8Array(randomSalt)].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\");\n    }\n    const derivedKey = await pbkdf2(\n      _crypto,\n      password,\n      salt,\n      options.iterations,\n      algorithm.keyBits / 8,\n      \"SHA-1\"\n    );\n    const importedEncryptionKey = await _crypto.subtle.importKey(\n      \"raw\",\n      derivedKey,\n      id,\n      false,\n      usage\n    );\n    result.key = importedEncryptionKey;\n    result.salt = salt;\n  } else {\n    if (password.length < algorithm.keyBits / 8)\n      throw new Error(\"Key buffer (password) too small\");\n    result.key = await _crypto.subtle.importKey(\"raw\", password, id, false, usage);\n    result.salt = \"\";\n  }\n  if (options.iv)\n    result.iv = options.iv;\n  else if (\"ivBits\" in algorithm)\n    result.iv = randomBits(_crypto, algorithm.ivBits);\n  return result;\n};\nvar encrypt = async (_crypto, password, options, data) => {\n  const key = await generateKey(_crypto, password, options);\n  const textBuffer = stringToBuffer(data);\n  const encrypted = await _crypto.subtle.encrypt(\n    { name: algorithms[options.algorithm].name, iv: key.iv },\n    key.key,\n    textBuffer\n  );\n  return { encrypted: new Uint8Array(encrypted), key };\n};\nvar decrypt = async (_crypto, password, options, data) => {\n  const key = await generateKey(_crypto, password, options);\n  const decrypted = await _crypto.subtle.decrypt(\n    { name: algorithms[options.algorithm].name, iv: key.iv },\n    key.key,\n    typeof data === \"string\" ? stringToBuffer(data) : data\n  );\n  return bufferToString(new Uint8Array(decrypted));\n};\nvar hmacWithPassword = async (_crypto, password, options, data) => {\n  const key = await generateKey(_crypto, password, { ...options, hmac: true });\n  const textBuffer = stringToBuffer(data);\n  const signed = await _crypto.subtle.sign({ name: \"HMAC\" }, key.key, textBuffer);\n  const digest = base64urlEncode(new Uint8Array(signed));\n  return { digest, salt: key.salt };\n};\nvar normalizePassword = (password) => {\n  if (typeof password === \"string\" || password instanceof Uint8Array)\n    return { encryption: password, integrity: password };\n  if (\"secret\" in password)\n    return { id: password.id, encryption: password.secret, integrity: password.secret };\n  return { id: password.id, encryption: password.encryption, integrity: password.integrity };\n};\nvar seal = async (_crypto, object, password, options) => {\n  if (!password)\n    throw Error(\"Empty password\");\n  const opts = clone(options);\n  const now = Date.now() + (opts.localtimeOffsetMsec || 0);\n  const objectString = JSON.stringify(object);\n  const pass = normalizePassword(password);\n  const { id = \"\" } = pass;\n  if (id && !/^\\w+$/.test(id))\n    throw new Error(\"Invalid password id\");\n  const { encrypted, key } = await encrypt(_crypto, pass.encryption, opts.encryption, objectString);\n  const encryptedB64 = base64urlEncode(new Uint8Array(encrypted));\n  const iv = base64urlEncode(key.iv);\n  const expiration = opts.ttl ? now + opts.ttl : \"\";\n  const macBaseString = `${macPrefix}*${id}*${key.salt}*${iv}*${encryptedB64}*${expiration}`;\n  const mac = await hmacWithPassword(_crypto, pass.integrity, opts.integrity, macBaseString);\n  const sealed = `${macBaseString}*${mac.salt}*${mac.digest}`;\n  return sealed;\n};\nvar fixedTimeComparison = (a, b) => {\n  let mismatch = a.length === b.length ? 0 : 1;\n  if (mismatch)\n    b = a;\n  for (let i = 0; i < a.length; i += 1)\n    mismatch |= a.charCodeAt(i) ^ b.charCodeAt(i);\n  return mismatch === 0;\n};\nvar unseal = async (_crypto, sealed, password, options) => {\n  if (!password)\n    throw Error(\"Empty password\");\n  const opts = clone(options);\n  const now = Date.now() + (opts.localtimeOffsetMsec || 0);\n  const parts = sealed.split(\"*\");\n  if (parts.length !== 8)\n    throw new Error(\"Incorrect number of sealed components\");\n  const prefix = parts[0];\n  let passwordId = parts[1];\n  const encryptionSalt = parts[2];\n  const encryptionIv = parts[3];\n  const encryptedB64 = parts[4];\n  const expiration = parts[5];\n  const hmacSalt = parts[6];\n  const hmac = parts[7];\n  const macBaseString = `${prefix}*${passwordId}*${encryptionSalt}*${encryptionIv}*${encryptedB64}*${expiration}`;\n  if (macPrefix !== prefix)\n    throw new Error(\"Wrong mac prefix\");\n  if (expiration) {\n    if (!/^\\d+$/.exec(expiration))\n      throw new Error(\"Invalid expiration\");\n    const exp = parseInt(expiration, 10);\n    if (exp <= now - opts.timestampSkewSec * 1e3)\n      throw new Error(\"Expired seal\");\n  }\n  if (typeof password === \"undefined\" || typeof password === \"string\" && password.length === 0)\n    throw new Error(\"Empty password\");\n  let pass = \"\";\n  passwordId = passwordId || \"default\";\n  if (typeof password === \"string\" || password instanceof Uint8Array)\n    pass = password;\n  else if (!(passwordId in password))\n    throw new Error(`Cannot find password: ${passwordId}`);\n  else\n    pass = password[passwordId];\n  pass = normalizePassword(pass);\n  const macOptions = opts.integrity;\n  macOptions.salt = hmacSalt;\n  const mac = await hmacWithPassword(_crypto, pass.integrity, macOptions, macBaseString);\n  if (!fixedTimeComparison(mac.digest, hmac))\n    throw new Error(\"Bad hmac value\");\n  const encrypted = base64urlDecode(encryptedB64);\n  const decryptOptions = opts.encryption;\n  decryptOptions.salt = encryptionSalt;\n  decryptOptions.iv = base64urlDecode(encryptionIv);\n  const decrypted = await decrypt(_crypto, pass.encryption, decryptOptions, encrypted);\n  if (decrypted)\n    return JSON.parse(decrypted);\n  return null;\n};\n\nexport { algorithms, base64urlDecode, base64urlEncode, bufferToString, clone, decrypt, defaults, encrypt, generateKey, hmacWithPassword, macFormatVersion, macPrefix, randomBits, seal, stringToBuffer, unseal };\n", "import { makeGenericAPIRouteHandler } from '@keystatic/core/api/generic';\nimport { parseString } from 'set-cookie-parser';\n\nfunction makeHandler(_config) {\n  var _config$clientId, _config$clientSecret, _config$secret;\n  const handler = makeGenericAPIRouteHandler({\n    ..._config,\n    clientId: (_config$clientId = _config.clientId) !== null && _config$clientId !== void 0 ? _config$clientId : tryOrUndefined(() => import.meta.env.KEYSTATIC_GITHUB_CLIENT_ID),\n    clientSecret: (_config$clientSecret = _config.clientSecret) !== null && _config$clientSecret !== void 0 ? _config$clientSecret : tryOrUndefined(() => import.meta.env.KEYSTATIC_GITHUB_CLIENT_SECRET),\n    secret: (_config$secret = _config.secret) !== null && _config$secret !== void 0 ? _config$secret : tryOrUndefined(() => import.meta.env.KEYSTATIC_SECRET)\n  }, {\n    slugEnvName: 'PUBLIC_KEYSTATIC_GITHUB_APP_SLUG'\n  });\n  return async function keystaticAPIRoute(context) {\n    const {\n      body,\n      headers,\n      status\n    } = await handler(context.request);\n    // all this stuff should be able to go away when astro is using a version of undici with getSetCookie\n    let headersInADifferentStructure = new Map();\n    if (headers) {\n      if (Array.isArray(headers)) {\n        for (const [key, value] of headers) {\n          if (!headersInADifferentStructure.has(key.toLowerCase())) {\n            headersInADifferentStructure.set(key.toLowerCase(), []);\n          }\n          headersInADifferentStructure.get(key.toLowerCase()).push(value);\n        }\n      } else if (typeof headers.entries === 'function') {\n        for (const [key, value] of headers.entries()) {\n          headersInADifferentStructure.set(key.toLowerCase(), [value]);\n        }\n        if ('getSetCookie' in headers && typeof headers.getSetCookie === 'function') {\n          const setCookieHeaders = headers.getSetCookie();\n          if (setCookieHeaders !== null && setCookieHeaders !== void 0 && setCookieHeaders.length) {\n            headersInADifferentStructure.set('set-cookie', setCookieHeaders);\n          }\n        }\n      } else {\n        for (const [key, value] of Object.entries(headers)) {\n          headersInADifferentStructure.set(key.toLowerCase(), [value]);\n        }\n      }\n    }\n    const setCookieHeaders = headersInADifferentStructure.get('set-cookie');\n    headersInADifferentStructure.delete('set-cookie');\n    if (setCookieHeaders) {\n      for (const setCookieValue of setCookieHeaders) {\n        var _options$sameSite;\n        const {\n          name,\n          value,\n          ...options\n        } = parseString(setCookieValue);\n        const sameSite = (_options$sameSite = options.sameSite) === null || _options$sameSite === void 0 ? void 0 : _options$sameSite.toLowerCase();\n        context.cookies.set(name, value, {\n          domain: options.domain,\n          expires: options.expires,\n          httpOnly: options.httpOnly,\n          maxAge: options.maxAge,\n          path: options.path,\n          sameSite: sameSite === 'lax' || sameSite === 'strict' || sameSite === 'none' ? sameSite : undefined\n        });\n      }\n    }\n    return new Response(body, {\n      status,\n      headers: [...headersInADifferentStructure.entries()].flatMap(([key, val]) => val.map(x => [key, x]))\n    });\n  };\n}\nfunction tryOrUndefined(fn) {\n  try {\n    return fn();\n  } catch {\n    return undefined;\n  }\n}\n\nexport { makeHandler };\n"],
  "mappings": "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",
  "names": ["parseString", "cookie", "value", "cookies", "cookie", "tryOrUndefined", "setCookieHeaders"]
}
